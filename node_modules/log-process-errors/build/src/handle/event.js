"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEvent=void 0;var _filterObj=_interopRequireDefault(require("filter-obj"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}


const getEvent=async function({
name,
promise,
value,
nextRejected,
nextValue})
{
const{rejected,value:valueA}=await parsePromise({
name,
promise,
value});


const event={rejected,value:valueA,nextRejected,nextValue};

const eventA=(0,_filterObj.default)(event,isDefined);
return eventA;
};exports.getEvent=getEvent;


const parsePromise=async function({name,promise,value}){
if(NO_PROMISE_EVENTS.has(name)){
return{value};
}

const{rejected,value:valueA}=await getPromiseValue({promise});


if(name==="rejectionHandled"){
return{value:valueA};
}

return{rejected,value:valueA};
};






const NO_PROMISE_EVENTS=new Set([
"uncaughtException",
"warning",
"unhandledRejection"]);



const getPromiseValue=async function({promise}){
try{
return{rejected:false,value:await promise};
}catch(error){
return{rejected:true,value:error};
}
};

const isDefined=function(key,value){
return value!==undefined;
};
//# sourceMappingURL=event.js.map