{"version":3,"sources":["../../src/options.js"],"names":["getOpts","path","opts","validateBasic","exampleConfig","EXAMPLE_OPTS","optsA","isDefined","mirrorEnv","optsB","DEFAULT_OPTS","trim","TypeError","progress","mirror","key","value","undefined"],"mappings":"uIAAA;AACA;;AAEA,mC;;;AAGO,KAAMA,CAAAA,OAAO,CAAG,SAAUC,IAAV,CAAgBC,IAAI,CAAG,EAAvB,CAA2B;AAChDC,aAAa,CAACF,IAAD,CAAOC,IAAP,CAAb;AACA,2BAASA,IAAT,CAAe,CAAEE,aAAa,CAAEC,YAAjB,CAAf;;AAEA,KAAMC,CAAAA,KAAK,CAAG,uBAAUJ,IAAV,CAAgBK,SAAhB,CAAd;AACA,KAAMC,CAAAA,SAAS,CAAG,0BAAlB;AACA,KAAMC,CAAAA,KAAK,CAAG,CAAE,GAAGC,YAAL,CAAmB,GAAGF,SAAtB,CAAiC,GAAGF,KAApC,CAAd;AACA,MAAOG,CAAAA,KAAP;AACD,CARM,C;;AAUP,KAAMN,CAAAA,aAAa,CAAG,SAAUF,IAAV,CAAgB;AACpC,GAAI,MAAOA,CAAAA,IAAP,GAAgB,QAAhB,EAA4BA,IAAI,CAACU,IAAL,KAAgB,EAAhD,CAAoD;AAClD,KAAM,IAAIC,CAAAA,SAAJ,CAAe,oCAAmCX,IAAK,EAAvD,CAAN;AACD;AACF,CAJD;;AAMO,KAAMS,CAAAA,YAAY,CAAG;AAC1BG,QAAQ,CAAE,KADgB;AAE1BC,MAAM,CAAE,yBAFkB,CAArB,C;;;AAKA,KAAMT,CAAAA,YAAY,CAAG;AAC1B,GAAGK,YADuB,CAArB,C;;;AAIP,KAAMH,CAAAA,SAAS,CAAG,SAAUQ,GAAV,CAAeC,KAAf,CAAsB;AACtC,MAAOA,CAAAA,KAAK,GAAKC,SAAjB;AACD,CAFD","sourcesContent":["import filterObj from 'filter-obj'\nimport { validate } from 'jest-validate'\n\nimport { getMirrorEnv } from './mirror.js'\n\n// Normalize options and assign default values\nexport const getOpts = function (path, opts = {}) {\n  validateBasic(path, opts)\n  validate(opts, { exampleConfig: EXAMPLE_OPTS })\n\n  const optsA = filterObj(opts, isDefined)\n  const mirrorEnv = getMirrorEnv()\n  const optsB = { ...DEFAULT_OPTS, ...mirrorEnv, ...optsA }\n  return optsB\n}\n\nconst validateBasic = function (path) {\n  if (typeof path !== 'string' || path.trim() === '') {\n    throw new TypeError(`Path must be a non-empty string: ${path}`)\n  }\n}\n\nexport const DEFAULT_OPTS = {\n  progress: false,\n  mirror: 'https://nodejs.org/dist',\n}\n\nexport const EXAMPLE_OPTS = {\n  ...DEFAULT_OPTS,\n}\n\nconst isDefined = function (key, value) {\n  return value !== undefined\n}\n"],"file":"src/options.js"}