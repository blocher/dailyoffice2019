"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.normalizeIndex=void 0;var _semver=require("semver");

var _group=require("./group.js");


const normalizeIndex=function(index){
const indexItems=index.map(normalizeVersion);
const versions=getAllVersions(indexItems);
const majors=getMajors(indexItems);
return{versions,majors};
};exports.normalizeIndex=normalizeIndex;

const normalizeVersion=function({version,lts}){

const versionA=version.slice(1);
const major=(0,_semver.major)(versionA);
return{version:versionA,major,lts};
};


const getAllVersions=function(indexItems){
return indexItems.map(getVersionField);
};

const getVersionField=function({version}){
return version;
};



const getMajors=function(indexItems){
const groups=(0,_group.groupBy)(indexItems,"major");

return Object.values(groups).map(getMajorInfo).sort(compareMajor);
};

const getMajorInfo=function(versions){
const[{major,version:latest}]=versions;
const lts=getLts(versions);
return{major,latest,...lts};
};

const getLts=function(versions){
const ltsVersion=versions.find(getLtsField);

if(ltsVersion===undefined){
return{};
}

const lts=ltsVersion.lts.toLowerCase();
return{lts};
};

const getLtsField=function({lts}){
return typeof lts==="string";
};

const compareMajor=function({major:majorA},{major:majorB}){
return majorA<majorB?1:-1;
};
//# sourceMappingURL=normalize.js.map